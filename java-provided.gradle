configurations {
    provided
}

sourceSets {
    main { compileClasspath += configurations.provided }
}

apply plugin: 'idea'
idea {
    module {
        scopes.PROVIDED.plus += [configurations.provided]
    }
}